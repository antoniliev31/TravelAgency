@model AllHotelQueryModel


@{
    ViewBag.Title = $"{Model.Hotels.Count()} ОФЕРТИ ЗА ПОЧИВКА";
}

<h2 class="text-center">@ViewBag.Title</h2>
<h6 class="text-center">Почивки в България и чужбина на супер цени. Разгледайте и сравнете най-изгодните почивки сега!</h6>
<hr />

<div class="container-fluid">
    <div class="row">
        <div class="col-md-2">
            <form method="get">
                <div class="row" style="font-weight: bold; background-color: orange; padding: 15px;">
                    <p class="text-center" style="font-weight: bold; text-align-all: center";>ФИЛТРИРАНЕ ПО</p>
                </div>

                <div class="form-group">
                    <label asp-for="Category" style="font-weight: bold;"></label>
                    <select asp-for="Category" class="form-control">
                        <option value="">Избери тип на хотела</option>
                        @foreach (var category in Model.Categories)
                        {
                            <option value="@category">@category</option>
                        }
                    </select>
                </div>

                <div class="form-group">
                    <label asp-for="Location" style="font-weight: bold;"></label>
                    <select asp-for="Location" class="form-control">
                        <option value="">Местоположение</option>
                        @foreach (var location in Model.Locations)
                        {
                            <option value="@location">@location</option>
                        }
                    </select>
                </div>

                <div class="form-group">
                    <label asp-for="SearchString" style="font-weight: bold;"></label>
                    <input asp-for="SearchString" class="form-control" placeholder="...">
                </div>

                <div class="form-group">
                    <label asp-for="HotelSorting" style="font-weight: bold;"></label>
                    <select asp-for="HotelSorting" class="form-control">
                        <option value="0">Най-нови</option>
                        <option value="1">Най-стари</option>
                        <option value="2">Най-ниска цена</option>
                        <option value="3">Най-висока цена</option>
                        <option value="4">(A-Я)Град(Населено място)</option>
                        <option value="5">(Я-А)Град(Населено място)</option>
                    </select>
                </div>

                <div class="form-group">
                    <input type="submit" value="Търси" class="btn btn-primary"/>
                </div>
            </form>
        </div>
        
        <div class="col-md-8">

            <div class="row mb-2">
                
                <div class="col-md-6 d-grid gap-1 d-md-flex justify-content-md-start">
                    <a class="btn btn-primary @(Model.CurrentPage == 1 ? "disabled" : string.Empty)"
                       asp-controller="Hotel" asp-action="All"
                       asp-route-currentPage="@(Model.CurrentPage - 1)"
                       asp-route-category="@Model.Category"
                       asp-route-city="@Model.Location"
                       asp-route-searchTerm="@Model.SearchString"
                       asp-route-sorting="@((int)Model.HotelSorting)"><<</a>
                </div>
                
                @*<div class="form-group">
                    <label asp-for="HousesPerPage" style="font-weight: bold;"></label>
                    <select asp-for="HousesPerPage" class="form-control">
                        <option value="3">3</option>
                        <option value="6">6</option>
                        <option value="9">9</option>
                        </select>

                </div>*@

                @{
                    int maxPage = (int)Math.Ceiling((double)Model.TotalHotels / Model.HotelsPerPage);
                    bool shouldNextPageBeDisabled = Model.CurrentPage == maxPage || !Model.Hotels.Any();
                }
                
                <div class="col-md-6 d-grid gap-1 d-md-flex justify-content-md-end">
                    <a class="btn btn-primary
                       @(shouldNextPageBeDisabled ? "disabled" : string.Empty)"
                       asp-controller="Hotel" asp-action="All"
                       asp-route-currentPage="@(Model.CurrentPage + 1)"
                       asp-route-category="@Model.Category"
                       asp-route-city="@Model.Location"
                       asp-route-searchTerm="@Model.SearchString"
                       asp-route-sorting="@((int)Model.HotelSorting)">>></a>
                </div>
            </div>
            
            
            
            <div class="row mt-0 mb-0">
                
                @if (!Model.Hotels.Any())
                {
                    <h5 class="text-center"> Не намерих нищо по избраните критерии!</h5>
                    <h5 class="text-center"> Моля променете критериите и опитайте отново!</h5>
                }
                
                @foreach (var hotel in Model.Hotels)
                {
                    string count = "col-md-4";
                    <div class=@count>
                        <partial name="_HotelPartial" model="@hotel" />
                    </div>
                }
            </div>
            
            
            
        </div>
        
        <div class="col-md-2">
            <form method="get">
                <div class="row" style="font-weight: bold; background-color: orange; padding: 15px;">
                    <p class="text-center" style="font-weight: bold; text-align-all: center" ;>ФИЛТРИРАНЕ ПО</p>
                </div>

                <div class="form-group">
                    <label asp-for="Category" style="font-weight: bold;"></label>
                    <select asp-for="Category" class="form-control">
                        <option value="">Избери тип на хотела</option>
                        @foreach (var category in Model.Categories)
                        {
                            <option value="@category">@category</option>
                        }
                    </select>
                </div>

                <div class="form-group">
                    <label asp-for="Location" style="font-weight: bold;"></label>
                    <select asp-for="Location" class="form-control">
                        <option value="">Местоположение</option>
                        @foreach (var location in Model.Locations)
                        {
                            <option value="@location">@location</option>
                        }
                    </select>
                </div>

                <div class="form-group">
                    <label asp-for="SearchString" style="font-weight: bold;"></label>
                    <input asp-for="SearchString" class="form-control" placeholder="...">
                </div>

                <div class="form-group">
                    <label asp-for="HotelSorting" style="font-weight: bold;"></label>
                    <select asp-for="HotelSorting" class="form-control">
                        <option value="0">Най-нови</option>
                        <option value="1">Най-стари</option>
                        <option value="2">Най-ниска цена</option>
                        <option value="3">Най-висока цена</option>
                        <option value="4">(A-Я)Град(Населено място)</option>
                        <option value="5">(Я-А)Град(Населено място)</option>
                    </select>
                </div>

                <div class="form-group">
                    <input type="submit" value="Търси" class="btn btn-primary" />
                </div>
            </form>
        </div>

    </div>
</div>
